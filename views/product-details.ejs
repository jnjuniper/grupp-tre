<!DOCTYPE html>
<html>
  <head>
    <title><%= product.productName%></title> 
    <link
      rel="icon"
      href="/images/logo.svg"
      media="(prefers-color-scheme: light)"
    />

    <link
      rel="icon"
      href="/images/logo-white.svg"
      media="(prefers-color-scheme: dark)"
    />
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.css" rel="stylesheet" />

    <style>
      body {
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <header><%- include('partials/header') %></header>

    <main class="container mx-auto px-4 py-10">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 pt-10">
        <!-- Carousel/Grid Section -->
        <div>
          <!-- Carousel (Visible on Mobile/Tablet) -->
          <div class="block md:hidden">
            <div id="product-carousel" class="relative w-full" data-carousel="slide">
              <!-- Carousel wrapper -->
              <div class="relative aspect-square overflow-hidden rounded-lg">
                <div class="hidden duration-700 ease-in-out" data-carousel-item>
                  <img
                    src="<%= product.image %>"
                    alt="<%= product.name %>"
                    class="absolute block w-full h-full object-cover"
                  />
                </div>
                <div class="hidden duration-700 ease-in-out" data-carousel-item>
                  <img
                    src="<%= product.secondaryImage1 || product.image %>"
                    alt="<%= product.name %>"
                    class="absolute block w-full h-full object-cover"
                  />
                </div>
                <div class="hidden duration-700 ease-in-out" data-carousel-item>
                  <img
                    src="<%= product.secondaryImage2 || product.image %>"
                    alt="<%= product.name %>"
                    class="absolute block w-full h-full object-cover"
                  />
                </div>
                <div class="hidden duration-700 ease-in-out" data-carousel-item>
                  <img
                    src="<%= product.secondaryImage3 || product.image %>"
                    alt="<%= product.name %>"
                    class="absolute block w-full h-full object-cover"
                  />
                </div>
              </div>
              <!-- Slider indicators -->
              <div class="absolute z-30 flex justify-center w-full bottom-4 space-x-3">
                <button type="button" class="w-3 h-3 rounded-full bg-gray-300" aria-current="true" aria-label="Slide 1" data-carousel-slide-to="0"></button>
                <button type="button" class="w-3 h-3 rounded-full bg-gray-300" aria-current="false" aria-label="Slide 2" data-carousel-slide-to="1"></button>
                <button type="button" class="w-3 h-3 rounded-full bg-gray-300" aria-current="false" aria-label="Slide 3" data-carousel-slide-to="2"></button>
                <button type="button" class="w-3 h-3 rounded-full bg-gray-300" aria-current="false" aria-label="Slide 4" data-carousel-slide-to="3"></button>
              </div>
              <!-- Slider controls -->
              <button
                type="button"
                class="absolute top-1/2 left-2 z-30 flex items-center justify-center w-10 h-10 rounded-full bg-black/30 group-hover:bg-black/50 transform -translate-y-1/2"
                data-carousel-prev
              >
                <svg
                  class="w-6 h-6 text-white"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  aria-hidden="true"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                <span class="sr-only">Previous</span>
              </button>
              <button
                type="button"
                class="absolute top-1/2 right-2 z-30 flex items-center justify-center w-10 h-10 rounded-full bg-black/30 group-hover:bg-black/50 transform -translate-y-1/2"
                data-carousel-next
              >
                <svg
                  class="w-6 h-6 text-white"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  aria-hidden="true"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
                <span class="sr-only">Next</span>
              </button>
            </div>
          </div>
      
          <!-- Grid (Visible on Desktop) -->
          <div class="hidden md:grid grid-cols-2 gap-4">
            <div>
              <img
                src="<%= product.image %>"
                alt="<%= product.name %>"
                class="w-full rounded-lg"
              />
            </div>
            <div>
              <img
                src="<%= product.secondaryImage1 || product.image %>"
                alt="<%= product.name %>"
                class="w-full rounded-lg"
              />
            </div>
            <div>
              <img
                src="<%= product.secondaryImage2 || product.image %>"
                alt="<%= product.name %>"
                class="w-full rounded-lg"
              />
            </div>
            <div>
              <img
                src="<%= product.secondaryImage3 || product.image %>"
                alt="<%= product.name %>"
                class="w-full rounded-lg"
              />
            </div>
          </div>
        </div>
      
        <!-- Product Details Section -->
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h1 class="text-3xl font-bold mb-4"><%= product.productName %></h1>
          <div class="flex justify-between items-left mb-6">
            <span class="text-2xl text-gray-800 font-bold"><%= product.brand %></span>
          </div>
          
          <div class="flex justify-between items-center mb-6">
            <span class="text-lg text-gray-700 font-semibold">$<%= product.price %></span>
          </div>
          <% if (isSizeVisible) { %>
            <div class="mb-6">
              <h2 class="font-semibold mb-2">Size</h2>
              <div class="grid grid-cols-4 gap-2">
                <% ['S', 'M', 'L', 'XL'].forEach(function(size) { %>
                <button
                  class="border border-gray-300 px-4 py-2 text-center rounded-md hover:bg-gray-200 focus:bg-gray-800 focus:text-white transition"
                >
                  <%= size %>
                </button>
                <% }); %>
              </div>
            </div>
            <% } %>
          <button
          class="w-full bg-black text-white py-3 rounded-md text-lg hover:bg-gray-800"
        >
          Add to Cart
        </button>
          <p class="text-gray-700 text-base mt-6">
            <%= product.productDescription %>
        </div>
      </div>
      

    <section class="mt-10">
      <h2 class="text-2xl font-bold mb-6 text-center">Related Products</h2>
      <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6">
        <% relatedProducts.forEach(function(related) { %>
        <a href="/products/<%= related.id %>" class="block">
          <div class="bg-white shadow-md rounded-lg overflow-hidden">
            <img
              src="<%= related.image %>"
              alt="<%= related.name %>"
              class="w-full h-48 object-cover"
            />
            <div class="p-4">
              <h3 class="text-lg font-bold text-gray-800"><%= related.name %></h3>
              <p class="text-sm text-gray-600"><%= related.brand %></p>
              <p class="text-lg font-bold text-gray-900"> $<%= related.price %></p>
            </div>
          </div>
        </a>
        <% }) %>
      </div>
      
     </section>
    </main>

        </div>
      </div>
      <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>

  </body>
  <footer><%- include('partials/footer') %></footer>
</html>
