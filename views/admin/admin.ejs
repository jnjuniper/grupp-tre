<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/javascript/admin.js" defer></script>
  </head>
  <body class="font-sans">
    <!-- Header -->
    <header><%- include('../partials/header') %></header>

    <!-- Main Content -->
    <main class="mt-28 p-6">
      <section class="w-full">
        <!-- Products Administration Accordion -->
        <button
          class="accordion-button flex justify-between items-center w-full bg-white text-black text-lg px-6 py-4 border border-blue-200 rounded-t-md hover:bg-black hover:text-white transition"
        >
          <strong>Products Administration</strong>
          <span
            class="accordion-icon text-blue-500 transition-transform transform rotate-0"
            >▼</span
          >
        </button>
        <div
          class="hidden panel bg-gray-50 px-6 py-4 border border-t-0 border-blue-200"
        >
          <table
            class="table-auto border-collapse border border-black w-full text-left"
          >
            <thead>
              <tr>
                <th class="border border-black px-4 py-2">ID</th>
                <th class="border border-black px-4 py-2">Produktnamn</th>
                <th class="border border-black px-4 py-2">Bild</th>
                <th class="border border-black px-4 py-2">Ny</th>
                <th class="border border-black px-4 py-2">Action</th>
              </tr>
            </thead>
            <tbody>
              <% products.forEach(product => { %>
              <tr>
                <td class="border border-black px-4 py-2">
                  <%= product.id %>
                </td>
                <td class="border border-black px-4 py-2">
                  <%= product.productName %>
                </td>
                <td class="border border-black px-4 py-2">
                  <img
                    src="<%= product.image %>"
                    alt="<%= product.productName %>"
                    class="h-16"
                  />
                </td>
                <td class="border border-black px-4 py-2">
                  <%= product.isNew === true || product.isNew === 'true' ||
                  product.isNew === 1 ? 'Yes' : 'No' %>
                </td>
                <td class="border border-black px-4 py-2">
                  <button
                  class="px-3 py-1 border border-blue-500 bg-white text-blue-500 hover:bg-blue-500 hover:text-white transition-all text-center rounded"
                  >
                    Edit
                  </button>
                  <form
                    action="/admin/delete/<%= product.id %>"
                    method="POST"
                    class="inline-block"
                  >
                    <button
                      type="submit"
                      class="px-3 py-1 border border-red-500 bg-white text-red-500 hover:bg-red-500 hover:text-white transition-all text-center rounded"
                    >
                      Delete
                    </button>
                  </form>
                </td>
              </tr>
              <% }); %>
            </tbody>
          </table>
        </div>

        <!-- Header Pictures Accordion -->
        <button
          class="accordion-button flex justify-between items-center w-full bg-white text-black text-lg px-6 py-4 border border-blue-200 hover:bg-black hover:text-white transition"
        >
          <strong>Header Pictures</strong>
          <span
            class="accordion-icon text-blue-500 transition-transform transform rotate-0"
            >▼</span
          >
        </button>
        <div
          class="hidden panel bg-gray-50 px-6 py-4 border border-t-0 border-blue-200"
        >
          <ul>
            <li>...</li>
          </ul>
        </div>

        <!-- Admin Users Accordion -->
        <button
          class="accordion-button flex justify-between items-center w-full bg-white text-black text-lg px-6 py-4 border border-blue-200 rounded-b-md hover:bg-black hover:text-white transition"
        >
          <strong>Admin användare</strong>
          <span
            class="accordion-icon text-blue-500 transition-transform transform rotate-0"
            >▼</span
          >
        </button>
        <div
          class="hidden panel bg-gray-50 px-6 py-4 border border-t-0 border-blue-200"
        >
          <table
            class="table-auto border-collapse border border-black w-full text-left"
          >
            <thead>
              <tr>
                <th class="border border-black px-4 py-2">Username</th>
                <th class="border border-black px-4 py-2">Password</th>
                <th class="border border-black px-4 py-2">Action</th>
              </tr>
            </thead>
            <tbody>
              <% adminUsers.forEach(user => { %>
              <tr>
                <form action="/admin/update-admin/<%= user.id %>" method="POST">
                  <td class="border border-black px-4 py-2">
                    <input
                      type="text"
                      id="username-<%= user.id %>"
                      name="username"
                      value="<%= user.username %>"
                      class="border border-gray-300 px-3 py-2 rounded w-full focus:outline-none focus:ring focus:ring-blue-200"
                      required
                    />
                  </td>
                  <td class="border border-black px-4 py-2">
                    <input
                      type="password"
                      id="password-<%= user.id %>"
                      name="password"
                      value="<%= user.password %>"
                      class="border border-gray-300 px-3 py-2 rounded w-full focus:outline-none focus:ring focus:ring-blue-200"
                      required
                    />
                  </td>
                  <td class="border border-black px-4 py-2">
                    <button
                      type="submit"
                      class="bg-white text-black px-4 py-2 rounded border border-black hover:bg-black hover:text-white transition"
                    >
                      Change
                    </button>
                  </td>
                </form>
              </tr>
              <% }); %>
            </tbody>
          </table>
        </div>
      </section>
    </main>
  </body>
</html>
